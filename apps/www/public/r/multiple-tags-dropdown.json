{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "multiple-tags-dropdown",
  "type": "registry:component",
  "title": "Multiple Tags Dropdown",
  "description": "A dropdown menu for selecting multiple tags",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "dropdown-menu",
    "input",
    "form",
    "utils",
    "button",
    "badge"
  ],
  "files": [
    {
      "path": "registry/default/components/dropdown-menu/multiple-tags-dropdown.tsx",
      "content": "'use client'\n\nimport { Button } from '@/registry/default/ui/button'\nimport {\n    DropdownMenu,\n    DropdownMenuContent,\n    DropdownMenuItem,\n    DropdownMenuLabel,\n    DropdownMenuSeparator,\n    DropdownMenuTrigger,\n} from '@/registry/default/ui/dropdown-menu'\nimport { Input } from '@/registry/default/ui/input'\nimport { cn } from '@/lib/utils'\nimport { ChevronDownIcon, PlusIcon, XIcon } from 'lucide-react'\nimport {\n    Form,\n    FormControl,\n    FormField,\n    FormItem,\n    FormMessage,\n} from '@/registry/default/ui/form'\nimport React from 'react'\nimport { z } from 'zod'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { Badge } from '@/registry/default/ui/badge'\n\nconst defaultTags = [\n    {\n        id: 'frontend',\n        label: 'Frontend',\n    },\n    {\n        id: 'backend',\n        label: 'Backend',\n    },\n    {\n        id: 'design',\n        label: 'Design',\n    },\n    {\n        id: 'devops',\n        label: 'DevOps',\n    },\n    {\n        id: 'qa',\n        label: 'QA',\n    },\n    {\n        id: 'operations',\n        label: 'Operations',\n    },\n]\n\ntype MultipleTagsDropdownProps = {\n    side: 'left' | 'right' | 'top' | 'bottom'\n    align: 'start' | 'center' | 'end'\n}\n\nconst formSchema = z.object({\n    tag: z.string().min(1, {\n        message: 'Tag is required',\n    }),\n})\n\nexport default function MultipleTagsDropdown({\n    side = 'bottom',\n    align = 'center',\n}: MultipleTagsDropdownProps) {\n    const [tags, setTags] = React.useState([...defaultTags])\n    const [selectedTags, setSelectedTags] = React.useState<string[]>([])\n    const [isInputFocused, setIsInputFocused] = React.useState(false)\n\n    const handleOnSelect = (tag: { id: string; label: string }) => {\n        if (selectedTags.includes(tag.id)) {\n            return setSelectedTags(selectedTags.filter((id) => id !== tag.id))\n        }\n\n        setSelectedTags([...selectedTags, tag.id])\n    }\n\n    // Handle keyboard events when input is focused\n    const handleInputKeyDown = (e: React.KeyboardEvent) => {\n        if (isInputFocused) {\n            // Stop event propagation to prevent dropdown keyboard navigation\n            e.stopPropagation()\n        }\n    }\n\n    const form = useForm<z.infer<typeof formSchema>>({\n        resolver: zodResolver(formSchema),\n        defaultValues: {\n            tag: '',\n        },\n    })\n\n    const onSubmit = (data: z.infer<typeof formSchema>) => {\n        if (!data.tag) return\n        if (tags.find((tag) => tag.id === data.tag.toLowerCase())) {\n            return form.setValue('tag', '')\n        }\n\n        setTags([\n            ...tags,\n            {\n                id: data.tag.toLowerCase(),\n                label: data.tag,\n            },\n        ])\n        form.reset()\n    }\n\n    return (\n        <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\" className=\"h-auto py-2\">\n                    {selectedTags.length > 0 ? (\n                        <div className=\"flex max-w-[150px] flex-wrap gap-1\">\n                            {selectedTags.map((t) => (\n                                <Badge key={t} variant=\"outline\">\n                                    {tags.find((tag) => tag.id === t)?.label}\n                                </Badge>\n                            ))}\n                        </div>\n                    ) : (\n                        <span>Assign Multiple Tags</span>\n                    )}\n                    <ChevronDownIcon />\n                </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent\n                align={align}\n                side={side}\n                className=\"w-[200px]\"\n                onKeyDown={(e) => {\n                    // Prevent dropdown keyboard navigation when input is focused\n                    if (isInputFocused) {\n                        e.stopPropagation()\n                    }\n                }}\n            >\n                <DropdownMenuLabel>Assign team</DropdownMenuLabel>\n                <DropdownMenuSeparator />\n                <div className=\"flex max-h-[200px] flex-wrap gap-1 overflow-y-auto\">\n                    {tags.map((tag) => (\n                        <DropdownMenuItem\n                            key={tag.id}\n                            onSelect={(e) => {\n                                e.preventDefault()\n                                handleOnSelect(tag)\n                            }}\n                            className={cn(\n                                'bg-accent focus:bg-accent/50 cursor-pointer py-1'\n                            )}\n                        >\n                            {tag.label}\n\n                            {selectedTags.includes(tag.id) && <XIcon />}\n                        </DropdownMenuItem>\n                    ))}\n                </div>\n                <DropdownMenuSeparator />\n\n                <Form {...form}>\n                    <form\n                        onSubmit={form.handleSubmit(onSubmit)}\n                        className=\"flex justify-end gap-1 p-1\"\n                    >\n                        <FormField\n                            control={form.control}\n                            name=\"tag\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormControl>\n                                        <Input\n                                            placeholder=\"New Team\"\n                                            autoFocus\n                                            className=\"h-8\"\n                                            onFocus={() =>\n                                                setIsInputFocused(true)\n                                            }\n                                            onKeyDown={handleInputKeyDown}\n                                            {...field}\n                                            onBlur={() => {\n                                                setIsInputFocused(false)\n                                                field.onBlur()\n                                            }}\n                                        />\n                                    </FormControl>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n                        <Button\n                            variant=\"outline\"\n                            size=\"icon\"\n                            className=\"h-8 w-8\"\n                        >\n                            <PlusIcon />\n                        </Button>\n                    </form>\n                </Form>\n            </DropdownMenuContent>\n        </DropdownMenu>\n    )\n}\n",
      "type": "registry:component",
      "target": "components/multiple-tags-dropdown.tsx"
    }
  ]
}